import{r as a,u as k,j as s,C as h,c as p,d as f,e as j,B as r,L as M,b as i}from"./index-Dt07UTka.js";import{I as w}from"./input-Bw9vQiwZ.js";import{L as N}from"./label-5-3zOpNH.js";import{C as F}from"./circle-check-big-DK0TIh3k.js";import{L as b}from"./lock-BPtVP7Qp.js";import{E as g}from"./eye-off-CYo70Vkr.js";import{E as v}from"./eye-BrJFRD8F.js";function O(){const[n,y]=a.useState(""),[o,C]=a.useState(""),[m,L]=a.useState(!1),[l,P]=a.useState(!1),[t,c]=a.useState(!1),[S,E]=a.useState(!1),d=k(),z=e=>e.length<8?"Le mot de passe doit contenir au moins 8 caractères":/(?=.*[a-z])/.test(e)?/(?=.*[A-Z])/.test(e)?/(?=.*\d)/.test(e)?null:"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre majuscule":"Le mot de passe doit contenir au moins une lettre minuscule",A=async e=>{e.preventDefault();const x=z(n);if(x){i.error(x);return}if(n!==o){i.error("Les mots de passe ne correspondent pas");return}c(!0);try{E(!0),i.info("La réinitialisation via l’API sera bientôt disponible."),setTimeout(()=>d("/auth"),2500)}catch(u){const I=u instanceof Error?u.message:"Une erreur inconnue s'est produite";i.error("Une erreur s'est produite: "+I)}finally{c(!1)}};return S?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-3 sm:p-4",children:s.jsxs(h,{className:"w-full max-w-sm sm:max-w-md shadow-xl",children:[s.jsxs(p,{className:"text-center space-y-3 sm:space-y-4",children:[s.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:s.jsx(F,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600"})}),s.jsx(f,{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Demande enregistrée"})]}),s.jsxs(j,{className:"text-center space-y-3 sm:space-y-4",children:[s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Vous serez redirigé vers la page de connexion."}),s.jsx(r,{variant:"outline",className:"w-full text-sm sm:text-base",onClick:()=>d("/auth"),children:"Aller à l'authentification"})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-3 sm:p-4",children:s.jsxs(h,{className:"w-full max-w-sm sm:max-w-md shadow-xl",children:[s.jsxs(p,{className:"text-center space-y-3 sm:space-y-4",children:[s.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:s.jsx(b,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600"})}),s.jsx(f,{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Nouveau mot de passe"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 px-2",children:"Cette fonctionnalité sera bientôt disponible via l’API."})]}),s.jsx(j,{className:"px-4 sm:px-6",children:s.jsxs("form",{onSubmit:A,className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(N,{htmlFor:"password",className:"text-sm sm:text-base",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(w,{id:"password",type:m?"text":"password",placeholder:"Saisissez votre nouveau mot de passe",value:n,onChange:e=>y(e.target.value),required:!0,disabled:t,className:"h-10 sm:h-12 pr-10 sm:pr-12 text-sm sm:text-base"}),s.jsx(r,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-10 sm:h-12 px-2 sm:px-3 hover:bg-transparent",onClick:()=>L(!m),disabled:t,children:m?s.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"}):s.jsx(v,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"})})]}),s.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 space-y-1",children:[s.jsx("p",{children:"Le mot de passe doit contenir :"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs sm:text-sm",children:[s.jsx("li",{children:"Au moins 8 caractères"}),s.jsx("li",{children:"Une lettre minuscule et majuscule"}),s.jsx("li",{children:"Au moins un chiffre"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(N,{htmlFor:"confirmPassword",className:"text-sm sm:text-base",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(w,{id:"confirmPassword",type:l?"text":"password",placeholder:"Confirmez votre nouveau mot de passe",value:o,onChange:e=>C(e.target.value),required:!0,disabled:t,className:"h-10 sm:h-12 pr-10 sm:pr-12 text-sm sm:text-base"}),s.jsx(r,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-10 sm:h-12 px-2 sm:px-3 hover:bg-transparent",onClick:()=>P(!l),disabled:t,children:l?s.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"}):s.jsx(v,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"})})]})]}),s.jsx(r,{type:"submit",className:"w-full h-10 sm:h-12 text-sm sm:text-base",disabled:t,children:t?s.jsxs(s.Fragment,{children:[s.jsx(M,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2 animate-spin"}),s.jsx("span",{className:"hidden sm:inline",children:"Mise à jour..."}),s.jsx("span",{className:"sm:hidden",children:"Mise à jour..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(b,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Mettre à jour le mot de passe"}),s.jsx("span",{className:"sm:hidden",children:"Mettre à jour"})]})})]})})]})})}export{O as ResetPassword};
