import{l as k,u as L,r as E,a as A,j as e,B as d,A as _,C as n,c as l,d as m,e as o,g as R}from"./index-Dt07UTka.js";import{L as x}from"./Layout-mbh2DWpt.js";import{B as p}from"./badge-BL2mfjTD.js";import{A as D}from"./ApplicationForm-BNFWNAwd.js";import{a as I}from"./useJobOffers-BrDiClz1.js";import{u as B}from"./useApplications-Dtoeuj7w.js";import{C as F}from"./spinner-DybE6_pM.js";import{B as b}from"./launchGate-DNqG8lWI.js";import{M as P}from"./map-pin-YC5vFqhh.js";import{U as T}from"./users-BSixSwM-.js";import{B as O}from"./banknote-B5ExLXZp.js";import{C as N}from"./calendar-BKvS43I6.js";import{C as G}from"./clock-BVvfuB3Z.js";import"./popover-YAsM8h-6.js";import"./Combination-aU0zapuW.js";import"./fr-CfdXjsD4.js";import"./en-US-Dy1UnLtf.js";import"./useQuery-BeOx6H6z.js";import"./useMutation-DLLhhcgk.js";import"./formatDistanceToNow-2oA28mCp.js";import"./endOfMonth-CkNiGKnp.js";import"./log-out-C2CngwNs.js";import"./SafeSelect-CA0q4OzQ.js";import"./index-Cr6IkeUt.js";import"./index-BdQq_4o_.js";import"./index-lOYlu7e4.js";import"./index-CUAMUldx.js";import"./input-Bw9vQiwZ.js";import"./label-5-3zOpNH.js";import"./textarea-DZPoKpSZ.js";import"./checkbox-i6IZ-y8B.js";import"./save-Dp_vy41W.js";import"./applicationUtils-GIDm11E_.js";import"./metierQuestions-BOW-dpJS.js";import"./circle-check-big-DK0TIh3k.js";import"./user-ix4zyo1H.js";import"./file-text-XdKEpMSd.js";import"./send-ekdqg9ff.js";import"./format-BbOC2X4i.js";function ke(){const{id:h}=k(),v=L(),[w,u]=E.useState(!1),{data:s,isLoading:y,error:c}=I(h||""),{user:M}=A(),{data:i,isLoading:C}=B(h||""),g=()=>{window.history.back()},S=()=>{u(!1)};if(y||C)return e.jsx(x,{children:e.jsx("div",{className:"container mx-auto px-4 py-8","aria-live":"polite",children:e.jsx(F,{text:"Chargement de l'offre..."})})});if(c||!s)return e.jsx(x,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Offre non trouvée"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:(c==null?void 0:c.message)??"Cette offre d'emploi n'existe pas ou n'est plus disponible."}),e.jsx(d,{variant:"outline",onClick:g,className:"bg-white text-blue-600",children:"Retour aux offres"})]})})});if(w)return e.jsx(D,{jobTitle:s.title,jobId:s.id,onBack:()=>u(!1),onSubmit:S});const f=(()=>{const t=s.categorie_metier;if(!t)return null;if(typeof t=="string")return t.trim();if(typeof t=="object"){const a=t,r=a.label||a.name||a.title||a.categorie||a.category;return(r==null?void 0:r.trim())||null}return null})(),j=t=>!t||t.length===0?"":`<ul>${t.map(r=>`<li>${(r||"").toString()}</li>`).join("")}</ul>`;return e.jsx(x,{children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-white to-blue-100 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white py-6 sm:py-8",children:e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6",children:[e.jsxs(d,{variant:"ghost",onClick:g,className:"mb-3 sm:mb-4 text-blue-600 bg-white text-sm sm:text-base",children:[e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Retour aux offres"}),e.jsx("span",{className:"sm:hidden",children:"Retour"})]}),e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-xs sm:text-sm bg-white/20 px-2 sm:px-3 py-1 rounded-full",children:s.department||"SEEG"})]}),f&&e.jsx("div",{className:"mb-2 sm:mb-3",children:e.jsx(p,{variant:"secondary",className:"bg-white/20 text-white border-white/30 text-xs sm:text-sm",children:f})}),e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 break-words",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm sm:text-base lg:text-lg",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(T,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.jsx("span",{children:s.contract_type})]}),s.salary_note&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(O,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.salary_note})]}),s.reporting_line&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.reporting_line})]})]})]})]})}),e.jsx("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-6 sm:py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6 sm:space-y-8",children:[(s.description||s.responsibilities&&s.responsibilities.length>0)&&e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(m,{className:"text-lg sm:text-xl",children:"MISSIONS PRINCIPALES"})}),e.jsx(o,{children:e.jsx("div",{className:"prose prose-sm sm:prose-base max-w-none text-foreground dark:prose-invert",dangerouslySetInnerHTML:{__html:s.description&&s.description.trim().length>0?s.description:j(s.responsibilities)}})})]}),(s.profile||s.requirements&&s.requirements.length>0)&&e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(m,{className:"text-lg sm:text-xl",children:"CONNAISSANCES, SAVOIRS-FAIRE ET PRE-REQUIS"})}),e.jsx(o,{children:e.jsx("div",{className:"prose prose-sm sm:prose-base max-w-none text-foreground dark:prose-invert",dangerouslySetInnerHTML:{__html:s.profile&&s.profile.trim().length>0?s.profile:j(s.requirements)}})})]}),s.benefits&&s.benefits.length>0&&e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(m,{className:"text-lg sm:text-xl",children:"Avantages"})}),e.jsx(o,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-2 gap-2 sm:gap-3",children:s.benefits.map((t,a)=>e.jsx(p,{variant:"secondary",className:"justify-start p-2 sm:p-3 text-xs sm:text-sm",children:t},a))})})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs(n,{className:"lg:sticky lg:top-6",children:[e.jsx(l,{children:e.jsx(m,{className:"text-lg sm:text-xl",children:"Postuler maintenant"})}),e.jsxs(o,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.start_date&&e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsxs("span",{children:["Date d'embauche: ",new Date(s.start_date).toLocaleDateString("fr-FR")]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsx(G,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{children:s.date_limite?`Date limite : ${new Date(s.date_limite).toLocaleDateString("fr-FR")}`:"Candidatures ouvertes"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsxs("span",{children:["Publié le ",new Date(s.created_at).toLocaleDateString("fr-FR")]})]})]}),i?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-green-800",children:e.jsxs(p,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs sm:text-sm",children:[i.status==="candidature"&&"Candidature envoyée",i.status==="incubation"&&"En cours d'évaluation",i.status==="embauche"&&"Candidature retenue",i.status==="refuse"&&"Candidature non retenue"]})}),e.jsxs("p",{className:"text-xs sm:text-sm text-green-700 mt-2",children:["Candidature envoyée le ",new Date(i.created_at).toLocaleDateString("fr-FR")]})]}),e.jsx(d,{variant:"outline",className:"w-full text-sm sm:text-base",size:"lg",onClick:()=>v("/candidate/dashboard?view=applications"),children:"Voir ma candidature"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:t=>t.preventDefault(),className:"w-full text-sm sm:text-base cursor-not-allowed border border-input bg-background hover:bg-accent hover:text-accent-foreground h-11 rounded-md px-8 inline-flex items-center justify-center whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:!0,title:"Les candidatures sont désormais closes",children:"Candidatures closes"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center leading-relaxed",children:"La période de candidature est terminée"})]})]})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(m,{className:"text-base sm:text-lg",children:"À propos de SEEG"})}),e.jsxs(o,{children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:"La Société d'Énergie et d'Eau du Gabon (SEEG) est l'opérateur historique des services publics d'électricité et d'eau potable au Gabon."}),e.jsx(d,{variant:"outline",size:"sm",className:"mt-3 sm:mt-4 w-full text-xs sm:text-sm",asChild:!0,children:e.jsx(R,{to:"/company-context",children:"En savoir plus"})})]})]})]})]})})]})})}export{ke as default};
