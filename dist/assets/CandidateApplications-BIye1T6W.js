import{h as b,a as A,u as V,r as m,j as e,B as o,C as g,c as L,d as E,e as v,g as N,b as d}from"./index-Dt07UTka.js";import{C as y}from"./CandidateLayout-BG-L92lp.js";import{B as l}from"./badge-BL2mfjTD.js";import{a as z}from"./useApplications-Dtoeuj7w.js";import{F as B}from"./spinner-DybE6_pM.js";import{u as _}from"./useBackendAuth-DCuf5k9n.js";import{M as F}from"./map-pin-YC5vFqhh.js";import{C as D}from"./calendar-BKvS43I6.js";import{E as I}from"./eye-BrJFRD8F.js";import{f as P}from"./format-BbOC2X4i.js";import{f as H}from"./fr-CfdXjsD4.js";import"./sidebar-DQHe9abK.js";import"./input-Bw9vQiwZ.js";import"./separator-CPOmk9ej.js";import"./index-CnKgKWfo.js";import"./Combination-aU0zapuW.js";import"./index-lOYlu7e4.js";import"./index-DmmJ9r5k.js";import"./chevron-right-BfnH_zY5.js";import"./index-CUAMUldx.js";import"./popover-YAsM8h-6.js";import"./Layout-mbh2DWpt.js";import"./launchGate-DNqG8lWI.js";import"./useQuery-BeOx6H6z.js";import"./useMutation-DLLhhcgk.js";import"./formatDistanceToNow-2oA28mCp.js";import"./en-US-Dy1UnLtf.js";import"./endOfMonth-CkNiGKnp.js";import"./log-out-C2CngwNs.js";import"./user-ix4zyo1H.js";import"./select-B2MghH9c.js";import"./index-Cr6IkeUt.js";import"./index-BdQq_4o_.js";import"./useJobOffers-BrDiClz1.js";import"./metierQuestions-BOW-dpJS.js";import"./file-text-XdKEpMSd.js";import"./job-card-nIfnLekR.js";import"./applicationUtils-GIDm11E_.js";import"./briefcase-DGZDCsL0.js";import"./layout-grid-0bM3oqzR.js";import"./list-BNYgf13m.js";import"./useDocuments-BoCfcbm3.js";import"./plus-Cq7fvgYR.js";import"./circle-check-big-DK0TIh3k.js";import"./users-BSixSwM-.js";import"./circle-x-Duq0gYSF.js";import"./label-5-3zOpNH.js";import"./avatar-NQv1LJOP.js";import"./index-D3cVrz6_.js";import"./users-Bp6FZJo5.js";import"./square-pen-BJrgxhp9.js";import"./save-Dp_vy41W.js";import"./mail-DxVkVQXW.js";import"./phone-Bri8K_yJ.js";import"./Chatbot-6VsFwavh.js";import"./send-ekdqg9ff.js";import"./progress-B636bzhk.js";import"./circle-alert-BJk9C7zG.js";import"./banknote-B5ExLXZp.js";import"./clock-BVvfuB3Z.js";import"./ApplicationForm-BNFWNAwd.js";import"./SafeSelect-CA0q4OzQ.js";import"./textarea-DZPoKpSZ.js";import"./checkbox-i6IZ-y8B.js";import"./search-CrW7gRAG.js";import"./filter-nUhWB70p.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=b("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=b("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function Ze(){const{user:w,isLoading:r}=A(),a=!!w,c=V(),{data:t,isLoading:M,error:n}=z(),{verifyMatricule:k}=_(),[p,i]=m.useState("unknown"),[x,u]=m.useState(!1);m.useEffect(()=>{!r&&!a&&c("/candidate/login")},[a,r,c]);const S=async()=>{try{u(!0);const s=await k();s.valid?(i("valid"),d.success("Matricule vérifié")):(i("invalid"),d.warning(s.reason||"Matricule non valide"))}catch{i("error"),d.error("Erreur lors de la vérification du matricule")}finally{u(!1)}};return r||M?e.jsx(B,{text:"Chargement de vos candidatures..."}):a?n?e.jsx(y,{children:e.jsxs("div",{className:"text-center py-12 text-red-600",children:[e.jsx("p",{children:"Une erreur est survenue lors du chargement de vos candidatures."}),e.jsx("p",{className:"text-sm",children:n.message})]})}):e.jsx(y,{children:e.jsxs("div",{className:"space-y-6 sm:space-y-8 px-3 sm:px-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2",children:"Mes candidatures"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground",children:"Suivi détaillé de toutes vos candidatures en cours"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:S,disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2 animate-pulse"})," Vérification..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"})," Vérifier mon matricule"]})}),p==="valid"&&e.jsx(l,{className:"bg-green-600",children:"Valide"}),p==="invalid"&&e.jsxs(l,{variant:"destructive",className:"gap-1",children:[e.jsx(R,{className:"w-3 h-3"})," Invalide"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t==null?void 0:t.map(s=>{var h,f,j;return e.jsxs(g,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(L,{className:"p-4 sm:p-6",children:[e.jsx(E,{className:"text-base sm:text-lg leading-tight",children:(h=s.job_offers)==null?void 0:h.title}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:(f=s.job_offers)==null?void 0:f.contract_type})]}),e.jsxs(v,{className:"p-4 sm:p-6 pt-0 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsx(F,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{children:(j=s.job_offers)==null?void 0:j.location})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsx(D,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"leading-relaxed",children:["Candidature déposée le ",P(new Date(s.created_at),"dd MMMM yyyy",{locale:H})]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(l,{variant:"secondary",className:"text-xs sm:text-sm",children:s.status})}),e.jsx(o,{asChild:!0,className:"w-full gap-2 text-xs sm:text-sm",children:e.jsxs(N,{to:`/candidate/application/${s.id}`,children:[e.jsx(I,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Voir le suivi détaillé"]})})]})]},s.id)})}),(t==null?void 0:t.length)===0&&e.jsx(g,{children:e.jsxs(v,{className:"text-center py-8 sm:py-12 px-4 sm:px-6",children:[e.jsx("p",{className:"text-muted-foreground mb-4 text-sm sm:text-base",children:"Vous n'avez encore aucune candidature en cours."}),e.jsx(o,{asChild:!0,className:"text-sm sm:text-base",children:e.jsx(N,{to:"/candidate/jobs",children:"Découvrir les offres disponibles"})})]})})]})}):null}export{Ze as default};
