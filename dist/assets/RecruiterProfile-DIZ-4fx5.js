import{a as F,k as S,r as N,j as e,C as g,c as A,d as B,B as d,X as R,L as E,e as f}from"./index-Dt07UTka.js";import{I as o}from"./input-Bw9vQiwZ.js";import{L as l}from"./label-5-3zOpNH.js";import{T as L}from"./textarea-DZPoKpSZ.js";import{A as T,a as z,b as I}from"./avatar-NQv1LJOP.js";import{B as M}from"./badge-BL2mfjTD.js";import{R as U}from"./RecruiterLayout-CzqFpArC.js";import{S as O}from"./square-pen-BJrgxhp9.js";import{S as D}from"./save-Dp_vy41W.js";import{U as j}from"./user-ix4zyo1H.js";import{M as G}from"./mail-DxVkVQXW.js";import{P as V}from"./phone-Bri8K_yJ.js";import{B as q}from"./briefcase-DGZDCsL0.js";import"./index-D3cVrz6_.js";import"./sidebar-DQHe9abK.js";import"./separator-CPOmk9ej.js";import"./index-CnKgKWfo.js";import"./Combination-aU0zapuW.js";import"./layout-dashboard-CftRPHET.js";import"./users-BSixSwM-.js";import"./brain-BM1gby9g.js";import"./log-out-C2CngwNs.js";function ue(){var h,p;const{user:s,updateUser:b,isUpdating:r,isRecruiter:H,isObserver:n}=F(),{toast:x}=S(),[m,c]=N.useState(!1),[a,i]=N.useState({firstName:(s==null?void 0:s.user_metadata.first_name)||"",lastName:(s==null?void 0:s.user_metadata.last_name)||"",email:(s==null?void 0:s.email)||"",currentPosition:(s==null?void 0:s.user_metadata.current_position)||"",phone:(s==null?void 0:s.user_metadata.phone)||"",bio:(s==null?void 0:s.user_metadata.bio)||""}),v=async()=>{var u;const{firstName:t,lastName:w,currentPosition:_,phone:C,bio:P}=a,k={first_name:t,last_name:w,current_position:_,phone:C,bio:P,role:((u=s==null?void 0:s.user_metadata)==null?void 0:u.role)||(n?"observer":"recruiter")};await b(k)?(x({title:"Profil mis à jour",description:"Vos informations ont été sauvegardées avec succès."}),c(!1)):x({title:"Erreur",description:"La mise à jour de votre profil a échoué. Veuillez réessayer.",variant:"destructive"})},y=()=>{i({firstName:(s==null?void 0:s.user_metadata.first_name)||"",lastName:(s==null?void 0:s.user_metadata.last_name)||"",email:(s==null?void 0:s.email)||"",currentPosition:(s==null?void 0:s.user_metadata.current_position)||"",phone:(s==null?void 0:s.user_metadata.phone)||"",bio:(s==null?void 0:s.user_metadata.bio)||""}),c(!1)};return e.jsx(U,{children:e.jsxs("div",{className:"space-y-6 sm:space-y-8 container mx-auto px-3 sm:px-4 py-6 sm:py-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:n?"Mon profil observateur":"Mon profil recruteur"}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground",children:n?"Gérez les informations de votre compte observateur":"Gérez les informations de votre compte recruteur"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:e.jsxs(g,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsx(B,{className:"text-lg sm:text-xl",children:"Informations"}),m?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:y,className:"gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(R,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Annuler"]}),e.jsxs(d,{size:"sm",onClick:v,disabled:r,className:"gap-1 sm:gap-2 text-xs sm:text-sm",children:[r?e.jsx(E,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}):e.jsx(D,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Sauvegarder"]})]}):e.jsxs(d,{variant:"outline",onClick:()=>c(!0),className:"gap-1 sm:gap-2 text-sm sm:text-base",children:[e.jsx(O,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Modifier"]})]})}),e.jsxs(f,{className:"space-y-4 px-4 sm:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"firstName",className:"text-sm sm:text-base",children:"Prénom"}),m?e.jsx(o,{id:"firstName",value:a.firstName,disabled:r,onChange:t=>i({...a,firstName:t.target.value}),className:"text-sm sm:text-base"}):e.jsxs("div",{className:"flex items-center gap-2 h-9 sm:h-10 px-3 py-2 border rounded-md bg-gray-50",children:[e.jsx(j,{className:"w-3 h-3 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base truncate",children:a.firstName})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"lastName",className:"text-sm sm:text-base",children:"Nom"}),m?e.jsx(o,{id:"lastName",value:a.lastName,disabled:r,onChange:t=>i({...a,lastName:t.target.value}),className:"text-sm sm:text-base"}):e.jsxs("div",{className:"flex items-center gap-2 h-9 sm:h-10 px-3 py-2 border rounded-md bg-gray-50",children:[e.jsx(j,{className:"w-3 h-3 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base truncate",children:a.lastName})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",className:"text-sm sm:text-base",children:"Email"}),m?e.jsx(o,{id:"email",type:"email",value:a.email,disabled:!0,onChange:t=>i({...a,email:t.target.value}),className:"text-sm sm:text-base"}):e.jsxs("div",{className:"flex items-center gap-2 h-9 sm:h-10 px-3 py-2 border rounded-md bg-gray-50",children:[e.jsx(G,{className:"w-3 h-3 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base truncate",children:a.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",className:"text-sm sm:text-base",children:"Téléphone"}),m?e.jsx(o,{id:"phone",value:a.phone,disabled:r,onChange:t=>i({...a,phone:t.target.value}),className:"text-sm sm:text-base"}):e.jsxs("div",{className:"flex items-center gap-2 h-9 sm:h-10 px-3 py-2 border rounded-md bg-gray-50",children:[e.jsx(V,{className:"w-3 h-3 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base truncate",children:a.phone||"Non renseigné"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentPosition",className:"text-sm sm:text-base",children:"Poste"}),m?e.jsx(o,{id:"currentPosition",value:a.currentPosition,disabled:r,onChange:t=>i({...a,currentPosition:t.target.value}),className:"text-sm sm:text-base"}):e.jsxs("div",{className:"flex items-center gap-2 h-9 sm:h-10 px-3 py-2 border rounded-md bg-gray-50",children:[e.jsx(q,{className:"w-3 h-3 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base truncate",children:a.currentPosition||(n?"Observateur":"Recruteur")})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"bio",className:"text-sm sm:text-base",children:"Bio"}),m?e.jsx(L,{id:"bio",value:a.bio,disabled:r,onChange:t=>i({...a,bio:t.target.value}),className:"text-sm sm:text-base min-h-20"}):e.jsx("div",{className:"min-h-20 px-3 py-2 border rounded-md bg-gray-50",children:e.jsx("span",{className:"text-sm sm:text-base text-muted-foreground",children:a.bio||"Aucune bio"})})]})]})]})}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:e.jsx(g,{children:e.jsx(f,{className:"pt-4 sm:pt-6 px-4 sm:px-6",children:e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[e.jsxs(T,{className:"w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 mx-auto",children:[e.jsx(z,{src:""}),e.jsxs(I,{className:"text-base sm:text-lg lg:text-xl",children:[(h=a.firstName)==null?void 0:h[0],(p=a.lastName)==null?void 0:p[0]]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:a.currentPosition||(n?"Observateur":"Recruteur")})]}),e.jsx(M,{variant:"secondary",className:"text-xs sm:text-sm",children:"Profil actif"})]})})})})]})]})})}export{ue as default};
