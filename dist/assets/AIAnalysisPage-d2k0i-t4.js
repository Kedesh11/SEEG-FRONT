import{n as ye,r as l,k as we,j as e,C as o,e as n,c as Se,d as Ce}from"./index-Dt07UTka.js";import{I as Te}from"./input-Bw9vQiwZ.js";import{B as me}from"./badge-BL2mfjTD.js";import{S as Me,a as Le,b as Pe,c as Ee,d as _e}from"./select-B2MghH9c.js";import{T as De,a as Ae,b as A,c as $}from"./tabs-CneaFKhQ.js";import{P as T}from"./progress-B636bzhk.js";import{R as $e}from"./RecruiterLayout-CzqFpArC.js";import{T as xe}from"./trending-up-B44pE4Wv.js";import{S as Fe}from"./search-CrW7gRAG.js";import{U as ue}from"./users-BSixSwM-.js";import{A as Ie}from"./award-BYw8fzxC.js";import{C as M}from"./circle-alert-BJk9C7zG.js";import{F as Re}from"./filter-nUhWB70p.js";import{C as he}from"./circle-check-big-DK0TIh3k.js";import{C as ke}from"./circle-x-Duq0gYSF.js";import"./index-Cr6IkeUt.js";import"./index-BdQq_4o_.js";import"./index-lOYlu7e4.js";import"./Combination-aU0zapuW.js";import"./index-CUAMUldx.js";import"./index-DmmJ9r5k.js";import"./sidebar-DQHe9abK.js";import"./separator-CPOmk9ej.js";import"./index-CnKgKWfo.js";import"./layout-dashboard-CftRPHET.js";import"./brain-BM1gby9g.js";import"./briefcase-DGZDCsL0.js";import"./user-ix4zyo1H.js";import"./log-out-C2CngwNs.js";const pe={},P=d=>d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),Oe=d=>{const F=P(d);for(const[m,b]of Object.entries(pe))if(P(m)===F)return b;return null},L=[{id:"737260aa-b155-443f-b21d-58bcbf8d151a",title:"Directeur Technique Eau",department:"Eau",location:"Libreville",status:"active"},{id:"391ccc64-2ee5-464f-942d-26df1719eeb6",title:"Chef de D√©partement Eau",department:"Eau",location:"Libreville",status:"active"},{id:"02108894-2219-4f32-8efa-942288a67495",title:"Directeur Exploitation Electricit√©",department:"√âlectricit√©",location:"Libreville",status:"active"},{id:"f4b7df17-95ac-4252-b057-e3503d072364",title:"Chef de D√©partement Electricit√©",department:"√âlectricit√©",location:"Libreville",status:"active"},{id:"b74da020-0a51-41b3-94e6-b9721d0ecf5d",title:"Directeur Technique Electricit√©",department:"√âlectricit√©",location:"Libreville",status:"active"},{id:"f426f59a-97b5-4bd1-b260-165dec5362bf",title:"Directeur Moyens G√©n√©raux",department:"Support",location:"Libreville",status:"active"},{id:"c34e8321-c9ab-4884-902d-ce19d977bd90",title:"Directeur Commercial et Recouvrement",department:"Support",location:"Libreville",status:"active"},{id:"707a8b92-4043-44c9-8a52-6c5b09cbb74c",title:"Coordonnateur des R√©gions",department:"Support",location:"Libreville",status:"active"},{id:"2f62f69e-8f00-4d5d-9f5b-f37462a55dee",title:"Directeur Audit & Contr√¥le interne",department:"Support",location:"Libreville",status:"active"},{id:"436331ac-ce6e-428c-bbb6-dad1841f8e85",title:"Directeur Qualit√©, Hygi√®ne, S√©curit√© & Environnement",department:"Support",location:"Libreville",status:"active"},{id:"41112afb-d778-4c2b-bb86-f9ee3b6ca5a4",title:"Directeur des Syst√®mes d'Information",department:"Support",location:"Libreville",status:"active"},{id:"3dc73269-03b2-42cb-a608-2943ed45731b",title:"Chef de D√©partement Support",department:"Support",location:"Libreville",status:"active"},{id:"c5a649a7-8230-4f89-ac5d-55f2464421e1",title:"Directeur du Capital Humain",department:"Support",location:"Libreville",status:"active"},{id:"42d50462-fa96-4e5d-888e-5bf82c9a3482",title:"Directeur Juridique, Communication & RSE",department:"Support",location:"Libreville",status:"active"},{id:"90d01e79-ec95-40a6-9f78-9919f9a37073",title:"Directeur Finances et Comptabilit√©",department:"Support",location:"Libreville",status:"active"},{id:"ee373d45-efcb-43e0-89ef-0983ac50d8da",title:"Directeur Exploitation Eau",department:"Eau",location:"Libreville",status:"active"}];function ps(){const[d,F]=ye(),[m,b]=l.useState(""),[N,fe]=l.useState(""),[E,je]=l.useState({}),[ge,I]=l.useState(!1),{toast:y}=we();l.useEffect(()=>{console.log("üìÅ Fichiers JSON disponibles:",Object.values(pe)),console.log("üìã Postes disponibles:",L.map(t=>t.title))},[]);const w=l.useCallback(async t=>{I(!0);try{const s=Oe(t);if(!s){y({title:"Erreur",description:`Aucune donn√©e d'√©valuation disponible pour le poste "${t}"`,variant:"destructive"});return}console.log(`üìÅ Chargement des donn√©es pour: ${t} -> ${s}`);const r=await fetch(`/${s}`);if(r.ok){const a=await r.json();console.log("‚úÖ Donn√©es charg√©es:",a),je(a)}else console.error(`‚ùå Erreur HTTP ${r.status}: ${r.statusText}`),y({title:"Erreur",description:`Impossible de charger le fichier ${s}`,variant:"destructive"})}catch(s){console.error("Erreur lors du chargement des donn√©es:",s),y({title:"Erreur",description:"Impossible de charger les donn√©es d'√©valuation",variant:"destructive"})}finally{I(!1)}},[y]);l.useEffect(()=>{const t=d.get("job");if(t){console.log(`üîç Recherche du poste: "${t}"`);const s=L.find(r=>P(r.title)===P(t));s?(console.log(`‚úÖ Poste trouv√©: ${s.title} (ID: ${s.id})`),b(s.id),w(s.title)):(console.log(`‚ùå Aucun poste trouv√© pour: "${t}"`),w(t))}},[d,w]);const S=t=>{var x,u,h,p,f,j,g,v;const s=((u=(x=t.conformite)==null?void 0:x["score de conformit√©"])==null?void 0:u.score_conformit√©)||0,r=((f=(p=(h=t.mtp)==null?void 0:h["score MTP"])==null?void 0:p.scores)==null?void 0:f.Moyen)||0,a=((g=(j=t.similarite_offre)==null?void 0:j["score de compl√©tude"])==null?void 0:g.score)||0,c=((v=t.resume_global)==null?void 0:v.score_global)||0,C=s*.05+r*100*.25+a*10*.5+c*100*.2;return Math.round(C)},R=l.useMemo(()=>N?Object.entries(E).filter(([t,s])=>{const r=t.toLowerCase(),a=N.toLowerCase();return r.includes(a)}):Object.entries(E),[E,N]),i=l.useMemo(()=>[...R].sort(([,t],[,s])=>{const r=S(t);return S(s)-r}),[R]),ve=t=>{console.log(`üîÑ Changement de poste s√©lectionn√©: ${t}`),b(t);const s=L.find(r=>r.id===t);s?(console.log(`üìã Poste trouv√©: ${s.title}`),w(s.title)):console.error(`‚ùå Aucun poste trouv√© avec l'ID: ${t}`)},be=t=>{switch(t.toLowerCase()){case"retenu":case"favorable":return e.jsx(he,{className:"w-4 h-4 text-green-500"});case"mitig√©":return e.jsx(M,{className:"w-4 h-4 text-yellow-500"});case"non retenu":case"rejet√©":case"d√©favorable":return e.jsx(ke,{className:"w-4 h-4 text-red-500"});default:return e.jsx(M,{className:"w-4 h-4 text-gray-500"})}},Ne=t=>{switch(t.toLowerCase()){case"retenu":case"favorable":return"bg-green-100 text-green-800";case"mitig√©":return"bg-yellow-100 text-yellow-800";case"non retenu":case"rejet√©":case"d√©favorable":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx($e,{children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analyse IA des Candidats"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"√âvaluation automatis√©e et analyse des profils candidats"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Powered by AI"})]})]}),e.jsx(o,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S√©lectionner un poste"}),e.jsxs(Me,{value:m,onValueChange:ve,children:[e.jsx(Le,{children:e.jsx(Pe,{placeholder:"Choisir un poste √† analyser"})}),e.jsx(Ee,{children:L.map(t=>e.jsxs(_e,{value:t.id,children:[t.title," - ",t.department]},t.id))})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher un candidat"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Te,{placeholder:"Nom du candidat...",value:N,onChange:t=>fe(t.target.value),className:"pl-10"})]})]})]})})}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(o,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Candidats"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),e.jsx(ue,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(o,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Moyenne Score"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[i.length>0?Math.round(i.reduce((t,[,s])=>t+S(s),0)/i.length):0,"%"]})]}),e.jsx(xe,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(o,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Retenus"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(([,t])=>{var s,r,a,c;return((r=(s=t.resume_global)==null?void 0:s.verdict)==null?void 0:r.toLowerCase().includes("retenu"))||((c=(a=t.resume_global)==null?void 0:a.verdict)==null?void 0:c.toLowerCase().includes("favorable"))}).length})]}),e.jsx(Ie,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(o,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En Attente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(([,t])=>{var s,r;return(r=(s=t.resume_global)==null?void 0:s.verdict)==null?void 0:r.toLowerCase().includes("mitig√©")}).length})]}),e.jsx(M,{className:"w-8 h-8 text-yellow-600"})]})})})]}),m&&e.jsxs(o,{children:[e.jsx(Se,{children:e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),"R√©sultats d'Analyse",ge&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]})}),e.jsx(n,{children:i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Aucun candidat trouv√©"})]}):e.jsx("div",{className:"space-y-4",children:i.map(([t,s],r)=>{var h,p,f,j,g,v,k,O,J,B,V,z,G,H,q,U,Q,X,K,W,Y,Z,ee,se,te,re,ae,le,ie,ce,oe,ne,de;const a=S(s),c=((p=(h=s.conformite)==null?void 0:h["score de conformit√©"])==null?void 0:p.score_conformit√©)||0,C=((g=(j=(f=s.mtp)==null?void 0:f["score MTP"])==null?void 0:j.scores)==null?void 0:g.Moyen)||0,x=((k=(v=s.similarite_offre)==null?void 0:v["score de compl√©tude"])==null?void 0:k.score)||0,u=((O=s.resume_global)==null?void 0:O.score_global)||0;return e.jsx(o,{className:"hover:shadow-md transition-shadow",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(me,{className:Ne(((J=s.resume_global)==null?void 0:J.verdict)||""),children:[be(((B=s.resume_global)==null?void 0:B.verdict)||""),((V=s.resume_global)==null?void 0:V.verdict)||"Non √©valu√©"]}),e.jsxs(me,{variant:"outline",children:["Rang #",((z=s.resume_global)==null?void 0:z.rang_global)||r+1]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[a,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score Global"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Conformit√© (5%)"}),e.jsx(T,{value:c,className:"h-2"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[c,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"MTP (25%)"}),e.jsx(T,{value:C*100,className:"h-2"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(C*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Feedback (50%)"}),e.jsx(T,{value:x*10,className:"h-2"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(x*10),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Completed (20%)"}),e.jsx(T,{value:u*100,className:"h-2"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(u*100),"%"]})]})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:((G=s.resume_global)==null?void 0:G.commentaire_global)||"Aucun commentaire disponible"})})]}),e.jsx("div",{className:"w-full lg:w-96",children:e.jsxs(De,{defaultValue:"forces",className:"w-full",children:[e.jsxs(Ae,{className:"grid w-full grid-cols-3",children:[e.jsx(A,{value:"forces",children:"Points Forts"}),e.jsx(A,{value:"ameliorer",children:"√Ä Am√©liorer"}),e.jsx(A,{value:"details",children:"D√©tails"})]}),e.jsx($,{value:"forces",className:"mt-4",children:e.jsx("div",{className:"space-y-2",children:((U=(q=(H=s.mtp)==null?void 0:H["score MTP"])==null?void 0:q.points_forts)==null?void 0:U.map((_,D)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:_})]},D)))||e.jsx("p",{className:"text-sm text-gray-500",children:"Aucun point fort identifi√©"})})}),e.jsx($,{value:"ameliorer",className:"mt-4",children:e.jsx("div",{className:"space-y-2",children:((K=(X=(Q=s.mtp)==null?void 0:Q["score MTP"])==null?void 0:X.points_a_travailler)==null?void 0:K.map((_,D)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-yellow-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:_})]},D)))||e.jsx("p",{className:"text-sm text-gray-500",children:"Aucun point d'am√©lioration identifi√©"})})}),e.jsx($,{value:"details",className:"mt-4",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Score MTP:"}),e.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[e.jsxs("div",{children:["M√©tier: ",Math.round((((Z=(Y=(W=s.mtp)==null?void 0:W["score MTP"])==null?void 0:Y.scores)==null?void 0:Z.M√©tier)||0)*100),"%"]}),e.jsxs("div",{children:["Talent: ",Math.round((((te=(se=(ee=s.mtp)==null?void 0:ee["score MTP"])==null?void 0:se.scores)==null?void 0:te.Talent)||0)*100),"%"]}),e.jsxs("div",{children:["Paradigme: ",Math.round((((le=(ae=(re=s.mtp)==null?void 0:re["score MTP"])==null?void 0:ae.scores)==null?void 0:le.Paradigme)||0)*100),"%"]}),e.jsxs("div",{children:["Moyen: ",Math.round((((oe=(ce=(ie=s.mtp)==null?void 0:ie["score MTP"])==null?void 0:ce.scores)==null?void 0:oe.Moyen)||0)*100),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Similarit√© Offre:"}),e.jsxs("div",{className:"ml-4 mt-1",children:[Math.round((((de=(ne=s.similarite_offre)==null?void 0:ne["score de compl√©tude"])==null?void 0:de.score)||0)*10),"%"]})]})]})})]})})]})})},t)})})})]})]})})}export{ps as default};
