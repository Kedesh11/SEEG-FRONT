import{h as I,l as z,u as B,n as q,r as j,j as e,B as b,A as U,C as x,e as h,c as p,d as f,k as V,X as i}from"./index-Dt07UTka.js";import{b as F}from"./useApplications-Dtoeuj7w.js";import{a as O,D as k,g as Q,f as $}from"./useDocuments-BoCfcbm3.js";import{O as C}from"./ObserverLayout-CvoqjA9a.js";import{B as m}from"./badge-BL2mfjTD.js";import{T as H,a as Z,b as g,c as v}from"./tabs-CneaFKhQ.js";import{I as W,A as P,d as X}from"./downloadUtils-B9thQDXH.js";import{M as E}from"./mail-DxVkVQXW.js";import{P as M}from"./phone-Bri8K_yJ.js";import{C as S}from"./calendar-BKvS43I6.js";import{B as T}from"./briefcase-DGZDCsL0.js";import{U as w}from"./user-ix4zyo1H.js";import{M as G}from"./map-pin-YC5vFqhh.js";import{U as A}from"./users-BSixSwM-.js";import{F as D}from"./file-text-XdKEpMSd.js";import{E as J}from"./eye-BrJFRD8F.js";import{C as c}from"./circle-check-big-DK0TIh3k.js";import{f as L}from"./format-BbOC2X4i.js";import{f as R}from"./fr-CfdXjsD4.js";import"./useQuery-BeOx6H6z.js";import"./useMutation-DLLhhcgk.js";import"./chart-column-Cqu8Sd2N.js";import"./brain-BM1gby9g.js";import"./log-out-C2CngwNs.js";import"./index-DmmJ9r5k.js";import"./index-lOYlu7e4.js";import"./en-US-Dy1UnLtf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=I("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),K=n=>{switch(n){case"candidature":return"default";case"incubation":return"secondary";case"embauche":return"success";case"refuse":return"destructive";default:return"default"}},d=({icon:n,label:s,value:t,isLink:r=!1})=>t==null||t===""?null:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx(n,{className:"w-3 h-3 sm:w-4 sm:h-4 text-muted-foreground mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[s,":"]}),r?e.jsx("a",{href:t.startsWith("http")?t:`https://${t}`,target:"_blank",rel:"noopener noreferrer",className:"block text-xs sm:text-sm text-blue-600 hover:underline break-all",children:t}):e.jsx("p",{className:"text-xs sm:text-sm text-foreground break-words",children:t})]})]}),Y=({application:n})=>{var r;const s=n==null?void 0:n.users,t=((r=n==null?void 0:n.users)==null?void 0:r.candidate_profiles)||null;return e.jsxs(x,{children:[e.jsx(p,{className:"p-4 sm:p-6",children:e.jsxs(f,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(w,{className:"w-4 h-4 sm:w-5 sm:h-5"})," Informations Personnelles"]})}),e.jsx(h,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(d,{icon:w,label:"Prénom",value:s==null?void 0:s.first_name}),e.jsx(d,{icon:w,label:"Nom",value:s==null?void 0:s.last_name}),e.jsx(d,{icon:E,label:"Email",value:s==null?void 0:s.email}),e.jsx(d,{icon:w,label:"Matricule",value:s==null?void 0:s.matricule})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(d,{icon:M,label:"Téléphone",value:s==null?void 0:s.phone}),e.jsx(d,{icon:S,label:"Date de naissance",value:t!=null&&t.birth_date?L(new Date(t.birth_date),"PPP",{locale:R}):void 0}),e.jsx(d,{icon:W,label:"Sexe",value:(t==null?void 0:t.gender)||(s==null?void 0:s.sexe)||(s==null?void 0:s.gender)})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(d,{icon:T,label:"Poste actuel",value:t==null?void 0:t.current_position}),e.jsx(d,{icon:T,label:"Années d'expérience",value:(t==null?void 0:t.years_experience)!==void 0?String(t.years_experience):void 0}),e.jsx(d,{icon:G,label:"Adresse",value:t==null?void 0:t.address})]})]})})]})},ee=({application:n})=>e.jsxs(x,{children:[e.jsx(p,{className:"p-4 sm:p-6",children:e.jsxs(f,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(A,{className:"w-4 h-4 sm:w-5 sm:h-5"})," Références de Recommandation"]})}),e.jsx(h,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Références"}),e.jsx("p",{className:"text-sm",children:"Consultez les références de recommandation des candidats."})]})})})]}),se=({application:n})=>{const{data:s,isLoading:t,error:r}=O(n.id),{toast:o}=V(),u=a=>a,N=async()=>{var a,l;try{s&&s.length>0&&(await X(s,`${(a=n.users)==null?void 0:a.first_name}_${(l=n.users)==null?void 0:l.last_name}_documents.zip`),o({title:"Téléchargement réussi",description:"Tous les documents ont été téléchargés en ZIP"}))}catch{o({title:"Erreur de téléchargement",description:"Impossible de télécharger les documents",variant:"destructive"})}};return e.jsxs(x,{children:[e.jsx(p,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(f,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(D,{className:"w-4 h-4 sm:w-5 sm:h-5"})," Documents de Candidature"]}),s&&s.length>0&&e.jsxs(b,{variant:"outline",size:"sm",onClick:N,children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Télécharger tout"]})]})}),e.jsx(h,{className:"p-4 sm:p-6",children:t?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-500",children:"Erreur lors du chargement des documents"})}):s&&s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(a=>e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm mb-1 truncate",title:a.file_name,children:a.file_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Q(a.document_type||"")," • ",$(a.file_size)]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>window.open(u(a.file_url),"_blank"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"})," Voir"]}),e.jsxs(b,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{const l=document.createElement("a");l.href=u(a.file_url),l.download=a.file_name,l.click()},children:[e.jsx(k,{className:"w-4 h-4 mr-2"})," Télécharger"]})]})]},String(a.id)))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucun document disponible"})]})})]})},te=({application:n})=>e.jsxs(x,{children:[e.jsx(p,{className:"p-4 sm:p-6",children:e.jsxs(f,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5"})," Évaluations et Commentaires"]})}),e.jsx(h,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Évaluations"}),e.jsx("p",{className:"text-sm",children:"Consultez les évaluations et commentaires des candidats."})]})})})]}),ae=({application:n})=>{const[s,t]=j.useState(null),[r,o]=j.useState(null),[u,N]=j.useState(!0);j.useEffect(()=>{N(!1)},[n.id]);const a=l=>{switch(l){case"completed":return e.jsx(m,{variant:"default",className:"bg-green-100 text-green-800",children:"Terminé"});case"in_progress":return e.jsx(m,{variant:"default",className:"bg-blue-100 text-blue-800",children:"En cours"});default:return e.jsx(m,{variant:"secondary",children:"En attente"})}};return u?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Protocole 1 - Évaluation Initiale"]})}),e.jsx(h,{children:s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Documents vérifiés"}),s.documents_verified?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Adhérence métier"}),s.adherence_metier?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Adhérence talent"}),s.adherence_talent?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Adhérence paradigme"}),s.adherence_paradigme?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Score global"}),e.jsxs(m,{variant:"outline",children:[s.overall_score,"/100"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Statut"}),a(s.completed?"completed":"in_progress")]})]})]}),s.metier_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes métier"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:s.metier_notes})]}),s.talent_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes talent"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:s.talent_notes})]}),s.paradigme_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes paradigme"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:s.paradigme_notes})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucune évaluation du protocole 1 disponible"})]})})]}),e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Protocole 2 - Évaluation Approfondie"]})}),e.jsx(h,{children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Visite physique"}),r.physical_visit?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Entretien terminé"}),r.interview_completed?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"QCM rôle terminé"}),r.qcm_role_completed?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"QCM codir terminé"}),r.qcm_codir_completed?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Fiche de poste créée"}),r.job_sheet_created?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Écart de compétences évalué"}),r.skills_gap_assessed?e.jsx(c,{className:"w-5 h-5 text-green-500"}):e.jsx(i,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Score global"}),e.jsxs(m,{variant:"outline",children:[r.overall_score,"/100"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Statut"}),a(r.completed?"completed":"in_progress")]})]})]}),r.qcm_role_score!==null&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Score QCM Rôle"}),e.jsxs(m,{variant:"outline",children:[r.qcm_role_score,"/100"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Score QCM Codir"}),e.jsxs(m,{variant:"outline",children:[r.qcm_codir_score,"/100"]})]})]}),r.interview_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes d'entretien"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:r.interview_notes})]}),r.visit_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes de visite"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:r.visit_notes})]}),r.skills_gap_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes sur l'écart de compétences"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:r.skills_gap_notes})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucune évaluation du protocole 2 disponible"})]})})]})]})};function Ee(){var _;const{applicationId:n}=z(),s=B();q();const{data:t,isLoading:r,error:o}=F(n),[u,N]=j.useState("profile");if(j.useEffect(()=>{n||s("/observer/candidates")},[n,s]),r)return e.jsx(C,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})});if(o||!t)return e.jsx(C,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:typeof o=="string"?o:"Candidature non trouvée"}),e.jsx(b,{variant:"outline",onClick:()=>s("/observer/candidates"),children:"Retour aux candidats"})]})})});const a=t.users,l=((_=t.job_offers)==null?void 0:_.title)||"Poste non spécifié";return e.jsx(C,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(b,{variant:"ghost",onClick:()=>s("/observer/candidates"),className:"mb-4",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Retour aux candidats"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]}),e.jsxs("p",{className:"text-muted-foreground",children:["Candidature pour ",e.jsx("span",{className:"font-medium",children:l})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(m,{variant:K(t.status),className:"text-sm",children:[t.status==="candidature"&&"Candidature",t.status==="incubation"&&"En incubation",t.status==="embauche"&&"Embauché",t.status==="refuse"&&"Refusé"]}),e.jsx(m,{variant:"secondary",className:"text-sm",children:"Mode Observateur"})]})]})]}),e.jsx(x,{className:"mb-6",children:e.jsx(h,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm font-medium",children:a==null?void 0:a.email})]})]}),(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Téléphone"}),e.jsx("p",{className:"text-sm font-medium",children:a.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Date de candidature"}),e.jsx("p",{className:"text-sm font-medium",children:L(new Date(t.created_at),"dd/MM/yyyy",{locale:R})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Poste candidaté"}),e.jsx("p",{className:"text-sm font-medium",children:l})]})]})]})})}),e.jsxs(H,{value:u,onValueChange:N,className:"space-y-6",children:[e.jsxs(Z,{className:"grid w-full grid-cols-5",children:[e.jsx(g,{value:"profile",children:"Profil"}),e.jsx(g,{value:"references",children:"Références"}),e.jsx(g,{value:"documents",children:"Documents"}),e.jsx(g,{value:"protocols",children:"Protocoles"}),e.jsx(g,{value:"evaluation",children:"Évaluations"})]}),e.jsx(v,{value:"profile",children:e.jsx(Y,{application:t})}),e.jsx(v,{value:"references",children:e.jsx(ee,{application:t})}),e.jsx(v,{value:"documents",children:e.jsx(se,{application:t})}),e.jsx(v,{value:"protocols",children:e.jsx(ae,{application:t})}),e.jsx(v,{value:"evaluation",children:e.jsx(te,{application:t})})]})]})})}export{Ee as default};
